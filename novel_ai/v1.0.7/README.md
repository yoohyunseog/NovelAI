# 속성 단위 편집기 - N/B Novel AI v1.0.7

## 개요

각 속성(attribute)마다 독립적인 입력란과 GPT 엔진을 가진 편집 시스템입니다.

## 주요 기능

### 1. 소설 메인 정보 화면
- **진행 단계 관리**: 5단계 시스템 (세계관 기획 → 본문 집필)
- **LV 시스템**: 소설의 진행 레벨 자동 계산
- **BIT 분석**: 소설 BIT vs 사용자 BIT 비교 분석
- **추천 작업**: 현재 단계에 맞는 다음 작업 추천
- **챕터 관리**: 챕터 수 및 상태 표시
- **생성/수정 정보**: 타임스탬프 및 생성자 정보

### 2. 속성 단위 편집
- 각 속성(줄거리 요약, 본문, 등장인물 등)마다 독립적인 입력란
- 각 입력란은 자체 GPT 엔진을 가짐
- 각 속성마다 고유한 시스템 프롬프트 사용

### 3. 트리 구조 네비게이션
- 로그인 정보 → 소설 → 챕터 → 속성
- 계층적 구조로 소설 관리
- 소설 선택 시 메인 정보 자동 표시

### 4. AI 기능
- **AI 생성**: 속성에 맞는 내용 자동 생성
- **AI 보완**: 기존 내용을 자연스럽게 보완/수정
- **직접 수정**: 사용자가 직접 텍스트 편집

### 5. N/B DATA 저장/로드
- 속성 경로 → BIT 계산 → 데이터 저장
- 속성 BIT와 데이터 BIT로 4개 파일 경로에 저장
- NDJSON 형식으로 저장

### 6. 상세 로그
- 모든 작업 과정을 로그창에 기록
- BIT 값, 저장 경로, GPT 응답 등 상세 정보

## 파일 구조

```
v1.0.7/
├── index.html              # 메인 HTML
├── assets/
│   ├── css/
│   │   └── style.css         # 스타일시트
│   └── js/
│       ├── config.js         # API 설정
│       ├── novelInfo.js      # 소설 메인 정보 관리 모듈
│       ├── attributeEditor.js # 속성 편집기 모듈
│       └── app.js            # 메인 애플리케이션 로직
└── README.md
```

## 사용 방법

### 1. 시작하기
1. 서버가 실행 중인지 확인 (`http://localhost:8123`)
2. 브라우저에서 `index.html` 열기
3. 로그인 정보 입력 (선택사항)

### 2. 소설 선택/생성
- 좌측 트리에서 소설 선택 → 중앙에 "소설 메인 정보" 탭 자동 표시
- 또는 "새 소설 생성" 버튼으로 새 소설 생성
- 소설 선택 시 자동으로 BIT 분석 및 진행 단계 표시

### 3. 소설 메인 정보 확인
- **소설 메인 정보** 탭에서 확인:
  - 진행 단계 (1-5단계)
  - LV (레벨) 정보
  - 챕터 수
  - BIT 분석 (소설 BIT vs 사용자 BIT)
  - 다음 추천 작업

### 4. 속성 편집
- 소설/챕터 선택 시 중앙에 속성 입력란 표시
- 각 속성마다:
  - **직접 수정**: 텍스트 입력란에 직접 입력
  - **AI 생성**: "AI 생성" 버튼으로 자동 생성
  - **AI 보완**: "AI 보완" 버튼으로 기존 내용 보완
  - **저장**: "저장" 버튼으로 N/B DATA에 저장

### 5. 데이터 로드
- 속성 선택 시 자동으로 저장된 데이터 로드
- 최신 데이터가 자동으로 입력란에 표시

### 6. 진행 단계 시스템
- **1단계**: 세계관·장르 기획 (기본 정보 입력)
- **2단계**: 줄거리·구성 설계 (줄거리 요약, 주요 사건)
- **3단계**: 등장인물·관계도 설계 (등장인물, 관계도)
- **4단계**: 레벨·아이템 시스템 확정 (레벨, 아이템)
- **5단계**: 본문 집필 및 BIT 튜닝 (챕터 작성)

### 7. LV 시스템
- **LV 1**: 기본 정보 입력 완료
- **LV 2**: 줄거리 요약 또는 등장인물 등록
- **LV 3**: 챕터 생성 완료
- **LV 4**: 본문 작성 완료
- **LV 5**: 모든 주요 속성 완성

## 속성별 시스템 프롬프트

각 속성마다 고유한 시스템 프롬프트가 정의되어 있습니다:

- **줄거리 요약**: 소설 요약 엔진
- **등장인물**: 캐릭터 구성 엔진
- **배경**: 배경 구성 엔진
- **아이템**: 아이템 구성 엔진
- **주요 사건**: 사건 구성 엔진
- **본문**: 소설 본문 생성 엔진
- **프롤로그**: 프롤로그 생성 엔진
- **레벨**: 레벨 구성 엔진
- **BIT 구조**: BIT 구조 설명 엔진
- **관계도**: 관계도 구성 엔진

## API 엔드포인트

- `GET /api/attributes/all`: 모든 속성 목록 조회
- `GET /api/attributes/data?bitMax=...&bitMin=...`: 속성 데이터 조회
- `POST /api/attributes/data`: 속성 데이터 저장
- `POST /api/gpt/chat`: GPT 채팅 API

## 로그 정보

로그창에 다음 정보가 기록됩니다:

- 속성 BIT 계산 결과
- 데이터 BIT 계산 결과
- 저장 경로 (MAX/MIN 폴더)
- GPT 생성/보완 결과
- 오류 메시지

## 기술 스택

- HTML5 / CSS3
- JavaScript (ES6+)
- Bootstrap 5.3
- Web Worker (BIT 계산)
- Fetch API (서버 통신)

## 버전 정보

- **v1.0.7**: 속성 단위 편집기 + 소설 메인 정보 화면
  - 속성별 독립 GPT 엔진
  - N/B DATA 저장/로드
  - 상세 로그 기능
  - 소설 메인 정보 화면 (진행 단계, LV, BIT 분석)
  - 다음 추천 작업 시스템
  - 탭 기반 UI (소설 메인 정보 / 속성 편집)


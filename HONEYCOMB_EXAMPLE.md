# λ²μ§‘ κµ¬μ΅° λ°μ΄ν„° μ €μ¥ μμ‹
## μ‹¤μ  μ‹λ‚λ¦¬μ¤: "νΈλΉ—" μ†μ„±μ— "μƒ¤μ΄μ–΄" λ°μ΄ν„° μ €μ¥ν•κΈ°

---

## π“ μ‹λ‚λ¦¬μ¤ μ„¤μ •

**μ‚¬μ©μ μ…λ ¥:**
1. **1λ‹¨κ³„ μ†μ„± (λ¬Έμ μ…λ ¥)**: "νΈλΉ—"
2. **2λ‹¨κ³„ λ°μ΄ν„° (λ¬Έμ μ…λ ¥)**: "μƒ¤μ΄μ–΄"

**μ΄λ―Έ μ΅΄μ¬ν•λ” λ°μ΄ν„° (μ°Έκ³ μ©):**
- μ†μ„±: "λ°μ§€μ μ μ™•" (BIT: 3.06, 2.66)
- λ°μ΄ν„°: "μ›μ •λ€" (BIT: 2.98, 2.77)

---

## π”„ λ‹¨κ³„λ³„ μ²λ¦¬ κ³Όμ •

### **1λ‹¨κ³„: μ‚¬μ©μ μ…λ ¥**

```
[bit_search.html νμ΄μ§€]

μ‚¬μ©μ μ…λ ¥:
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚ 1λ‹¨κ³„: μ†μ„± (λ¬Έμ μ…λ ¥)     β”‚
β”‚ "νΈλΉ—"                      β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”

β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚ 2λ‹¨κ³„: λ°μ΄ν„° (λ¬Έμ μ…λ ¥)   β”‚
β”‚ "μƒ¤μ΄μ–΄"                    β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”

[μ†μ„±μ— λ°μ΄ν„° μ €μ¥] λ²„νΌ ν΄λ¦­
```

---

### **2λ‹¨κ³„: BIT κ°’ κ³„μ‚° (ν΄λΌμ΄μ–ΈνΈ)**

```javascript
// ν΄λΌμ΄μ–ΈνΈμ—μ„ μ‹¤ν–‰ (bit_search.html)

// μ†μ„± BIT κ³„μ‚°
μ†μ„± ν…μ¤νΈ: "νΈλΉ—"
  β†“
wordNbUnicodeFormat("νΈλΉ—")
  β†’ μ λ‹μ½”λ“ λ°°μ—΄: ["ko", ...μ«μλ“¤...]
  β†“
BIT_MAX_NB(μ λ‹μ½”λ“ λ°°μ—΄, reverse=false)
  β†’ μ†μ„±BIT_MAX: 3.123456789012345  (μμ‹)
  β†“
BIT_MIN_NB(μ λ‹μ½”λ“ λ°°μ—΄, reverse=true)
  β†’ μ†μ„±BIT_MIN: 2.701234567890123  (μμ‹)

// λ°μ΄ν„° BIT κ³„μ‚°
λ°μ΄ν„° ν…μ¤νΈ: "μƒ¤μ΄μ–΄"
  β†“
wordNbUnicodeFormat("μƒ¤μ΄μ–΄")
  β†’ μ λ‹μ½”λ“ λ°°μ—΄: ["ko", ...μ«μλ“¤...]
  β†“
BIT_MAX_NB(μ λ‹μ½”λ“ λ°°μ—΄, reverse=false)
  β†’ λ°μ΄ν„°BIT_MAX: 2.954321098765432  (μμ‹)
  β†“
BIT_MIN_NB(μ λ‹μ½”λ“ λ°°μ—΄, reverse=true)
  β†’ λ°μ΄ν„°BIT_MIN: 2.789012345678901  (μμ‹)
```

**κ³„μ‚° κ²°κ³Ό:**
```
μ†μ„± "νΈλΉ—":
  - BIT_MAX: 3.123456789012345
  - BIT_MIN: 2.701234567890123

λ°μ΄ν„° "μƒ¤μ΄μ–΄":
  - BIT_MAX: 2.954321098765432
  - BIT_MIN: 2.789012345678901
```

---

### **3λ‹¨κ³„: μ„λ²„λ΅ μ „μ†΅**

```javascript
// ν΄λΌμ΄μ–ΈνΈ β†’ μ„λ²„ (POST /api/attributes/data)

μ”μ²­ URL: http://localhost:8123/api/attributes/data

μ”μ²­ λ³Έλ¬Έ (JSON):
{
  "attributeBitMax": 3.123456789012345,
  "attributeBitMin": 2.701234567890123,
  "attributeText": "νΈλΉ—",
  "text": "μƒ¤μ΄μ–΄",
  "dataBitMax": 2.954321098765432,
  "dataBitMin": 2.789012345678901
}
```

---

### **4λ‹¨κ³„: λ μ½”λ“ μƒμ„± (μ„λ²„)**

```javascript
// μ„λ²„μ—μ„ λ μ½”λ“ μƒμ„±

const record = {
  "timestamp": "2025-10-31T23:15:30.123Z",
  "t": 1761952530123,
  "s": "μƒ¤μ΄μ–΄",  // λ°μ΄ν„° ν…μ¤νΈ (κΈ°μ΅΄ νΈν™μ„±)
  "max": 2.954321098765432,  // λ°μ΄ν„° BIT_MAX (κΈ°μ΅΄ νΈν™μ„±)
  "min": 2.789012345678901,  // λ°μ΄ν„° BIT_MIN (κΈ°μ΅΄ νΈν™μ„±)
  "attribute": {
    "text": "νΈλΉ—",
    "bitMax": 3.123456789012345,
    "bitMin": 2.701234567890123
  },
  "data": {
    "text": "μƒ¤μ΄μ–΄",
    "bitMax": 2.954321098765432,
    "bitMin": 2.789012345678901
  }
};

const line = JSON.stringify(record) + '\n';
// ν• μ¤„ NDJSON ν•μ‹μΌλ΅ λ³€ν™
```

---

### **5λ‹¨κ³„: μ €μ¥ μ„μΉ κ²°μ • (4κ³³)**

#### **5-1. μ†μ„± BIT_MAX κ²½λ΅ κ³„μ‚°**

```
μ†μ„±BIT_MAX: 3.123456789012345
  β†“
nestedPathFromNumber('max', 3.123456789012345)
  β†“
μ«μ β†’ λ¬Έμμ—΄: "3.123456789012345"
μ†μμ  μ κ±°: "3123456789012345"
κ° μλ¦Ώμ λ¶„λ¦¬: [3, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5]
  β†“
κ²½λ΅ μƒμ„±:
  baseDir = data/max/3/1/2/3/4/5/6/7/8/9/0/1/2/3/4/5
  targetDir = data/max/3/1/2/3/4/5/6/7/8/9/0/1/2/3/4/5/max_bit/
  nestedFile = data/max/3/1/2/3/4/5/6/7/8/9/0/1/2/3/4/5/max_bit/log.ndjson
```

#### **5-2. μ†μ„± BIT_MIN κ²½λ΅ κ³„μ‚°**

```
μ†μ„±BIT_MIN: 2.701234567890123
  β†“
nestedPathFromNumber('min', 2.701234567890123)
  β†“
κ²½λ΅ μƒμ„±:
  nestedFile = data/min/2/7/0/1/2/3/4/5/6/7/8/9/0/1/2/3/min_bit/log.ndjson
```

#### **5-3. λ°μ΄ν„° BIT_MAX κ²½λ΅ κ³„μ‚°**

```
λ°μ΄ν„°BIT_MAX: 2.954321098765432
  β†“
nestedPathFromNumber('max', 2.954321098765432)
  β†“
κ²½λ΅ μƒμ„±:
  nestedFile = data/max/2/9/5/4/3/2/1/0/9/8/7/6/5/4/3/2/max_bit/log.ndjson
```

#### **5-4. λ°μ΄ν„° BIT_MIN κ²½λ΅ κ³„μ‚°**

```
λ°μ΄ν„°BIT_MIN: 2.789012345678901
  β†“
nestedPathFromNumber('min', 2.789012345678901)
  β†“
κ²½λ΅ μƒμ„±:
  nestedFile = data/min/2/7/8/9/0/1/2/3/4/5/6/7/8/9/0/1/min_bit/log.ndjson
```

---

### **6λ‹¨κ³„: νμΌ μ €μ¥ (4κ³³)**

```
μ„λ²„ μ‘μ—…:

1. μ†μ„± MAX ν΄λ” μ €μ¥
   νμΌ: data/max/3/1/2/3/4/5/6/7/8/9/0/1/2/3/4/5/max_bit/log.ndjson
   μ‘μ—…: ν΄λ” μƒμ„± (μ—†μΌλ©΄) β†’ νμΌ λμ— λ μ½”λ“ μ¶”κ°€ (appendFileSync)
   
2. μ†μ„± MIN ν΄λ” μ €μ¥
   νμΌ: data/min/2/7/0/1/2/3/4/5/6/7/8/9/0/1/2/3/min_bit/log.ndjson
   μ‘μ—…: ν΄λ” μƒμ„± (μ—†μΌλ©΄) β†’ νμΌ λμ— λ μ½”λ“ μ¶”κ°€
   
3. λ°μ΄ν„° MAX ν΄λ” μ €μ¥
   νμΌ: data/max/2/9/5/4/3/2/1/0/9/8/7/6/5/4/3/2/max_bit/log.ndjson
   μ‘μ—…: ν΄λ” μƒμ„± (μ—†μΌλ©΄) β†’ νμΌ λμ— λ μ½”λ“ μ¶”κ°€
   
4. λ°μ΄ν„° MIN ν΄λ” μ €μ¥
   νμΌ: data/min/2/7/8/9/0/1/2/3/4/5/6/7/8/9/0/1/min_bit/log.ndjson
   μ‘μ—…: ν΄λ” μƒμ„± (μ—†μΌλ©΄) β†’ νμΌ λμ— λ μ½”λ“ μ¶”κ°€
```

**μ‹¤μ  νμΌ μ‹μ¤ν…:**
```
server/data/
β”β”€ max/
β”‚   β”β”€ 3/1/2/3/4/5/6/7/8/9/0/1/2/3/4/5/
β”‚   β”‚   β””β”€ max_bit/
β”‚   β”‚       β””β”€ log.ndjson  β† [1] μ†μ„± MAXμ— μ €μ¥
β”‚   β”‚
β”‚   β””β”€ 2/9/5/4/3/2/1/0/9/8/7/6/5/4/3/2/
β”‚       β””β”€ max_bit/
β”‚           β””β”€ log.ndjson  β† [3] λ°μ΄ν„° MAXμ— μ €μ¥
β”‚
β””β”€ min/
    β”β”€ 2/7/0/1/2/3/4/5/6/7/8/9/0/1/2/3/
    β”‚   β””β”€ min_bit/
    β”‚       β””β”€ log.ndjson  β† [2] μ†μ„± MINμ— μ €μ¥
    β”‚
    β””β”€ 2/7/8/9/0/1/2/3/4/5/6/7/8/9/0/1/
        β””β”€ min_bit/
            β””β”€ log.ndjson  β† [4] λ°μ΄ν„° MINμ— μ €μ¥
```

**κ° νμΌμ λ‚΄μ©:**
- λ¨λ“  νμΌμ— **λ™μΌν• λ μ½”λ“**κ°€ μ €μ¥λ¨ (κ°™μ€ JSON κ°μ²΄)
- νμΌ ν•μ‹: NDJSON (ν• μ¤„μ— ν•λ‚μ JSON κ°μ²΄)

---

### **7λ‹¨κ³„: λ²μ§‘ κµ¬μ΅° κ΄€μ **

#### **7-1. μ…€ μƒμ„±**

```
μƒλ΅μ΄ μ†μ„± μ…€ μƒμ„±:
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚ μ†μ„± μ…€: "νΈλΉ—"              β”‚
β”‚ μ„μΉ: (BIT_MAX: 3.12,       β”‚
β”‚       BIT_MIN: 2.70)         β”‚
β”‚                             β”‚
β”‚ λ‚΄λ¶€ λ°μ΄ν„°:                 β”‚
β”‚  β””β”€ λ°μ΄ν„° μ…€: "μƒ¤μ΄μ–΄"     β”‚
β”‚     μ„μΉ: (BIT_MAX: 2.95,    β”‚
β”‚           BIT_MIN: 2.78)     β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

#### **7-2. μΈμ ‘ μ…€ νƒμƒ‰ (μ„ νƒμ , λ‚μ¤‘μ—)**

```
κΈ°μ΅΄ λ²μ§‘ κµ¬μ΅°:

    [λ°μ§€μ μ μ™•]
    (3.06, 2.66)
         β”‚
    β”β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”
    β”‚         β”‚
  [νΈλΉ—]    [λ‹¤λ¥Έ μ†μ„±]
 (3.12, 2.70)

μΈμ ‘μ„± κ³„μ‚°:
κ±°λ¦¬ = β((3.06 - 3.12)Β² + (2.66 - 2.70)Β²)
     = β(0.0036 + 0.0016)
     = β0.0052
     β‰ 0.072

μ„κ³„κ°’ = 0.5
β†’ κ±°λ¦¬(0.072) < μ„κ³„κ°’(0.5)
β†’ "λ°μ§€μ μ μ™•"κ³Ό "νΈλΉ—"μ€ μΈμ ‘ μ…€!
```

---

### **8λ‹¨κ³„: μ‘λ‹µ λ°ν™**

```json
// μ„λ²„ β†’ ν΄λΌμ΄μ–ΈνΈ

{
  "ok": true,
  "record": {
    "timestamp": "2025-10-31T23:15:30.123Z",
    "t": 1761952530123,
    "s": "μƒ¤μ΄μ–΄",
    "max": 2.954321098765432,
    "min": 2.789012345678901,
    "attribute": {
      "text": "νΈλΉ—",
      "bitMax": 3.123456789012345,
      "bitMin": 2.701234567890123
    },
    "data": {
      "text": "μƒ¤μ΄μ–΄",
      "bitMax": 2.954321098765432,
      "bitMin": 2.789012345678901
    }
  },
  "files": {
    "attributeMax": "data/max/3/1/2/3/4/5/6/7/8/9/0/1/2/3/4/5/max_bit/log.ndjson",
    "attributeMin": "data/min/2/7/0/1/2/3/4/5/6/7/8/9/0/1/2/3/min_bit/log.ndjson",
    "dataMax": "data/max/2/9/5/4/3/2/1/0/9/8/7/6/5/4/3/2/max_bit/log.ndjson",
    "dataMin": "data/min/2/7/8/9/0/1/2/3/4/5/6/7/8/9/0/1/min_bit/log.ndjson"
  }
}
```

---

### **9λ‹¨κ³„: ν΄λΌμ΄μ–ΈνΈ ν‘μ‹**

```
[bit_search.html]

μ €μ¥ μƒνƒ ν‘μ‹:
"β“ μ €μ¥ μ™„λ£! μ†μ„± 'νΈλΉ—' (BIT: 3.12, 2.70)μ— λ°μ΄ν„° μ¶”κ°€λ¨"

(μ„ νƒμ ) μ €μ¥λ μ„μΉ ν‘μ‹:
- μ†μ„± MAX: data/max/3/1/2/.../max_bit/log.ndjson
- μ†μ„± MIN: data/min/2/7/0/.../min_bit/log.ndjson
- λ°μ΄ν„° MAX: data/max/2/9/5/.../max_bit/log.ndjson
- λ°μ΄ν„° MIN: data/min/2/7/8/.../min_bit/log.ndjson
```

---

## π” κ²€μƒ‰ μ‹λ‚λ¦¬μ¤

### **μ‹λ‚λ¦¬μ¤: "νΈλΉ—" μ†μ„±μΌλ΅ κ²€μƒ‰**

```
μ‚¬μ©μ μ…λ ¥: "νΈλΉ—" κ²€μƒ‰

1λ‹¨κ³„: BIT κ°’ κ³„μ‚°
  "νΈλΉ—" β†’ BIT_MAX: 3.12, BIT_MIN: 2.70

2λ‹¨κ³„: μ†μ„± λ°μ΄ν„° μ΅°ν
  GET /api/attributes/data?bitMax=3.12&bitMin=2.70
  
3λ‹¨κ³„: μ„λ²„μ—μ„ κ²€μƒ‰
  - MAX ν΄λ”: data/max/3/1/2/3/.../max_bit/log.ndjson μ½κΈ°
  - attribute.bitMax === 3.12 && attribute.bitMin === 2.70 ν•„ν„°λ§
  
4λ‹¨κ³„: κ²°κ³Ό λ°ν™
  [
    {
      "attribute": { "text": "νΈλΉ—", ... },
      "data": { "text": "μƒ¤μ΄μ–΄", ... }
    }
  ]

5λ‹¨κ³„: λ²μ§‘ κµ¬μ΅° ν™•μ¥ κ²€μƒ‰ (λ‚μ¤‘μ—)
  - "νΈλΉ—" μ…€ μ°ΎκΈ°
  - μΈμ ‘ μ…€ νƒμƒ‰ (κ±°λ¦¬ < 0.5)
  - "λ°μ§€μ μ μ™•" μ…€ λ°κ²¬ (κ±°λ¦¬: 0.072)
  - μΈμ ‘ μ…€μ λ°μ΄ν„°λ„ ν•¨κ» λ°ν™
```

---

## π“ μ „μ²΄ λ°μ΄ν„° νλ¦„λ„

```
[μ‚¬μ©μ μ…λ ¥]
    β†“
[BIT κ³„μ‚°] (ν΄λΌμ΄μ–ΈνΈ)
    β†“
[μ„λ²„ μ „μ†΅] POST /api/attributes/data
    β†“
[λ μ½”λ“ μƒμ„±] (μ„λ²„)
    β†“
[κ²½λ΅ κ³„μ‚°] 4κ³³
    β”β”€ μ†μ„± MAX κ²½λ΅
    β”β”€ μ†μ„± MIN κ²½λ΅
    β”β”€ λ°μ΄ν„° MAX κ²½λ΅
    β””β”€ λ°μ΄ν„° MIN κ²½λ΅
    β†“
[νμΌ μ €μ¥] 4κ³³μ— λ™μΌ λ μ½”λ“ μ €μ¥
    β”β”€ ν΄λ” μƒμ„± (μ—†μΌλ©΄)
    β””β”€ appendFileSync (NDJSON)
    β†“
[μ‘λ‹µ λ°ν™] μ €μ¥ μ™„λ£
    β†“
[ν΄λΌμ΄μ–ΈνΈ ν‘μ‹] μ„±κ³µ λ©”μ‹μ§€
```

---

## π― ν•µμ‹¬ ν¬μΈνΈ

### **1. 4κ³³ μ €μ¥μ μ΄μ **
- **μ†μ„± BIT κ°’**μΌλ΅ μ €μ¥ β†’ μ†μ„±μΌλ΅ κ²€μƒ‰ κ°€λ¥
- **λ°μ΄ν„° BIT κ°’**μΌλ΅ μ €μ¥ β†’ λ°μ΄ν„°λ΅λ„ κ²€μƒ‰ κ°€λ¥
- MAX/MIN κ°κ° μ €μ¥ β†’ μ–‘λ°©ν–¥ κ²€μƒ‰ μ§€μ›

### **2. λ™μΌ λ μ½”λ“ μ €μ¥**
- λ¨λ“  νμΌμ— **κ°™μ€ JSON κ°μ²΄** μ €μ¥
- λ‹¨μν **κ²½λ΅λ§ λ‹¤λ¦„**
- μ¤‘λ³µμ΄μ§€λ§ κ²€μƒ‰ μ„±λ¥ ν–¥μƒ

### **3. λ²μ§‘ κµ¬μ΅° κ΄€μ **
- κ° μ†μ„± = ν•λ‚μ μ…€
- BIT κ°’ = μ…€μ μΆν‘
- λ°μ΄ν„° = μ…€ λ‚΄λ¶€ λ‚΄μ©λ¬Ό
- μΈμ ‘μ„± = BIT κ±°λ¦¬λ΅ κ³„μ‚° (λ‚μ¤‘μ— κµ¬ν„)

---

**μ΄μ  μ΄ μ €μ¥λ λ°μ΄ν„°λ” λ²μ§‘ κµ¬μ΅°μ ν• μ…€λ΅μ„, λ‹¤λ¥Έ μ…€λ“¤κ³Όμ μΈμ ‘μ„±μ„ κ³„μ‚°ν•  μ μμµλ‹λ‹¤!**

